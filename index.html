<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù‚ÛŒØ§Ø³ - Ø§Ø¨Ø²Ø§Ø± Ø¬Ø§Ù…Ø¹ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
    <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ± Ùˆ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ -->
    <script src="https://developer.eitaa.com/eitaa-web-app.js"></script>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #2563eb; /* Ø¢Ø¨ÛŒ Ø§ØµÙ„ÛŒ */
            --secondary: #4f46e5; /* Ø¨Ù†ÙØ´ */
            --accent: #f59e0b; /* Ù†Ø§Ø±Ù†Ø¬ÛŒ */
            --success: #10b981;
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --radius: 16px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Vazir', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
       /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ Ù…Ø®ØµÙˆØµ Ù‡Ø¯Ø± ØªØµÙˆÛŒØ±ÛŒ */
header.img-header {
    padding: 0; /* Ø­Ø°Ù ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ */
    margin: 0;
    background: transparent; /* Ø­Ø°Ù Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
    box-shadow: 0 10px 20px -10px rgba(0,0,0,0.3); /* Ø³Ø§ÛŒÙ‡ Ø²ÛŒØ± Ø¹Ú©Ø³ */
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom-left-radius: 25px;
    border-bottom-right-radius: 25px;
    overflow: hidden; /* Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³ Ú¯Ø±Ø¯ Ø´ÙˆØ¯ */
}

/* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¹Ú©Ø³ */
.header-image {
    width: 100%; /* ØªÙ…Ø§Ù… Ø¹Ø±Ø¶ ØµÙØ­Ù‡ */
    height: auto; /* Ø§Ø±ØªÙØ§Ø¹ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© ØªØ§ Ø¹Ú©Ø³ Ø¯ÙØ±Ù…Ù‡ Ù†Ø´ÙˆØ¯ */
    display: block; /* Ø­Ø°Ù ÙØ§ØµÙ„Ù‡ Ø³ÙÛŒØ¯ Ø²ÛŒØ± Ø¹Ú©Ø³ */
    object-fit: cover;
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ø§ Ø±Ù†Ú¯ Ø³Ø¨Ø² ØªÛŒØ±Ù‡ */
#back-btn {
    position: absolute;
    
    /* --- ØªÙ†Ø¸ÛŒÙ… Ù…Ø­Ù„ Ù‚Ø±Ø§Ø±Ú¯ÛŒØ±ÛŒ --- */
    top: 15px;   /* ÙØ§ØµÙ„Ù‡ Ø§Ø² Ø¨Ø§Ù„Ø§ */
    right: 15px; /* ÙØ§ØµÙ„Ù‡ Ø§Ø² Ø±Ø§Ø³Øª (Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø¨Ù‡ Ú†Ù¾ØŒ right Ø±Ø§ Ø¨Ù‡ left ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†ÛŒØ¯) */
    /* ------------------------- */

    /* --- ØªÙ†Ø¸ÛŒÙ… Ø±Ù†Ú¯ Ø³Ø¨Ø² ØªÛŒØ±Ù‡ --- */
    background-color: rgba(6, 78, 59, 0.9); /* Ø³Ø¨Ø² Ø²Ù…Ø±Ø¯ÛŒ ØªÛŒØ±Ù‡ */
    color: #ffffff; /* Ø±Ù†Ú¯ Ø¢ÛŒÚ©ÙˆÙ† Ø³ÙÛŒØ¯ */
    border: 1px solid rgba(255, 255, 255, 0.2); /* ÛŒÚ© Ø®Ø· Ù†Ø§Ø²Ú© Ø³ÙÛŒØ¯ Ø¯ÙˆØ± Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ Ø²ÛŒØ¨Ø§ÛŒÛŒ */
    /* ------------------------- */

    width: 40px;
    height: 40px;
    border-radius: 50%; /* Ø¯Ø§ÛŒØ±Ù‡ Ú©Ø§Ù…Ù„ */
    cursor: pointer;
    display: none; /* Ø¯Ø± ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ù…Ø®ÙÛŒ Ø§Ø³Øª (ØªÙˆØ³Ø· Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©Ù†ØªØ±Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯) */
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    z-index: 101;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3); /* Ø³Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯ Ø¨Ù‡ØªØ± */
    transition: background 0.3s;
}

/* ÙˆÙ‚ØªÛŒ Ù…ÙˆØ³ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ù…ÛŒØ±ÙˆØ¯ (Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±) */
#back-btn:hover {
    background-color: rgba(6, 78, 59, 1); /* Ø±Ù†Ú¯ Ú©Ø§Ù…Ù„ Ù¾Ø±Ø±Ù†Ú¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ */
}

        /* Container */
        .container {
            padding: 20px;
            flex: 1;
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
        }

        /* Menu Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .menu-btn {
            background: var(--card);
            border: none;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            text-align: center;
        }

        .menu-btn:active { transform: scale(0.96); }
        .menu-btn i { font-size: 2rem; margin-bottom: 5px; }
        .menu-btn span { font-weight: bold; font-size: 0.95rem; color: var(--text); }

        /* Colors for Categories */
        .cat-finance i { color: #10b981; }
        .cat-health i { color: #ef4444; }
        .cat-time i { color: #3b82f6; }
        .cat-unit i { color: #f59e0b; }
        .cat-other i { color: #8b5cf6; }

        /* Views Logic */
        .view-section { display: none; animation: fadeIn 0.3s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Forms & Inputs */
        .tool-card {
            background: var(--card);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        h2.tool-title {
            font-size: 1.1rem;
            margin-top: 0;
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-size: 0.9rem; font-weight: 500; }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #cbd5e1;
            border-radius: 12px;
            font-family: 'Vazir';
            font-size: 1rem;
            transition: 0.3s;
            background: #f8fafc;
        }
        input:focus, select:focus { outline: none; border-color: var(--primary); background: white; }

        .row { display: flex; gap: 10px; }
        .col { flex: 1; }

        /* Buttons */
        .btn-calc {
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        /* Results */
        .result-box {
            margin-top: 20px;
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
            color: #064e3b;
            padding: 15px;
            border-radius: 12px;
            display: none;
        }
        .result-title { font-size: 0.85rem; color: #059669; margin-bottom: 5px; }
        .result-value { font-size: 1.5rem; font-weight: 800; margin-bottom: 8px; }
        .result-desc { font-size: 0.9rem; line-height: 1.6; color: #334155; }

        /* Special Tables (Currency) */
        .currency-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        .currency-table th, .currency-table td { padding: 10px; text-align: center; border-bottom: 1px solid #eee; }
        .currency-table th { background: #f1f5f9; color: #64748b; }

        /* GPA Dynamic Rows */
        .gpa-row { display: flex; gap: 5px; margin-bottom: 8px; align-items: center; }
        .btn-small { padding: 5px 10px; background: #eee; border-radius: 6px; border: none; cursor: pointer; }
            /* Ø§ÛŒÙ† Ú©Ø¯ ÙÙ‚Ø· Ù…Ø®ØµÙˆØµ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ùˆ ØªØ¨Ù„Øª Ø§Ø³Øª */
    @media (min-width: 601px) {
        header.img-header {
            max-width: 600px; /* Ø¹Ø±Ø¶ Ù‡Ø¯Ø± Ø±Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ú©Ù† */
            margin: 0 auto;   /* Ù‡Ø¯Ø± Ø±Ø§ ÙˆØ³Ø· ØµÙØ­Ù‡ Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡ */
            border-radius: 0 0 25px 25px; /* Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ† Ø±Ø§ Ú¯Ø±Ø¯ Ù†Ú¯Ù‡ Ø¯Ø§Ø± */
        }
    }

    </style>
</head>
<body>

<header class="img-header">
    <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª (Ø±ÙˆÛŒ Ø¹Ú©Ø³ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯) -->
    <button id="back-btn" onclick="goBack()"><i class="fas fa-arrow-right"></i></button>
    
    <!-- Ø¹Ú©Ø³ Ù‡Ø¯Ø± (Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ØªÙ†â€ŒÙ‡Ø§) -->
    <img src="header.jpg" alt="Ø³Ø±Ø¨Ø±Ú¯ Ù…Ù‚ÛŒØ§Ø³" class="header-image">
</header>


<div class="container">

    <!-- 1. Home Page (Main Menu) -->
    <div id="view-home" class="view-section active">
        <div class="menu-grid">
            <button class="menu-btn cat-finance" onclick="navTo('cat-finance')">
                <i class="fas fa-coins"></i>
                <span>Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ù…Ø§Ù„ÛŒ</span>
            </button>
            <button class="menu-btn cat-health" onclick="navTo('cat-health')">
                <i class="fas fa-heartbeat"></i>
                <span>Ø³Ù„Ø§Ù…Øª Ùˆ Ù¾Ø²Ø´Ú©ÛŒ</span>
            </button>
            <button class="menu-btn cat-time" onclick="navTo('cat-time')">
                <i class="fas fa-clock"></i>
                <span>Ø²Ù…Ø§Ù† Ùˆ ØªØ§Ø±ÛŒØ®</span>
            </button>
            <button class="menu-btn cat-unit" onclick="navTo('cat-unit')">
                <i class="fas fa-ruler-combined"></i>
                <span>ØªØ¨Ø¯ÛŒÙ„ ÙˆØ§Ø­Ø¯</span>
            </button>
            <button class="menu-btn cat-other" onclick="navTo('cat-other')">
                <i class="fas fa-graduation-cap"></i>
                <span>Ø³Ø§ÛŒØ± Ù…Ø­Ø§Ø³Ø¨Ø§Øª</span>
            </button>
        </div>
    </div>

    <!-- ================= CATEGORIES ================= -->

    <!-- 2. Financial Category -->
    <div id="view-cat-finance" class="view-section">
        <div class="menu-grid">
            <button class="menu-btn" onclick="navTo('tool-gold')"><i class="fas fa-gem text-gold"></i><span>Ù‚ÛŒÙ…Øª Ø·Ù„Ø§</span></button>
            <button class="menu-btn" onclick="navTo('tool-loan')"><i class="fas fa-money-check-alt"></i><span>Ø§Ù‚Ø³Ø§Ø· ÙˆØ§Ù…</span></button>
            <button class="menu-btn" onclick="navTo('tool-deposit')"><i class="fas fa-piggy-bank"></i><span>Ø³ÙˆØ¯ Ø³Ù¾Ø±Ø¯Ù‡</span></button>
            <button class="menu-btn" onclick="navTo('tool-discount')"><i class="fas fa-percent"></i><span>ØªØ®ÙÛŒÙ</span></button>
            <button class="menu-btn" onclick="navTo('tool-rates')"><i class="fas fa-chart-line"></i><span>Ù†Ø±Ø® Ø§Ø±Ø² Ùˆ Ø·Ù„Ø§</span></button>
        </div>
    </div>

    <!-- 3. Health Category -->
    <div id="view-cat-health" class="view-section">
        <div class="menu-grid">
            <button class="menu-btn" onclick="navTo('tool-bmi')"><i class="fas fa-weight"></i><span>Ø´Ø§Ø®Øµ BMI</span></button>
            <button class="menu-btn" onclick="navTo('tool-bmr')"><i class="fas fa-fire"></i><span>Ø³ÙˆØ®Øª Ùˆ Ø³Ø§Ø² (BMR)</span></button>
            <button class="menu-btn" onclick="navTo('tool-tdee')"><i class="fas fa-running"></i><span>Ú©Ø§Ù„Ø±ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ (TDEE)</span></button>
            <button class="menu-btn" onclick="navTo('tool-ibw')"><i class="fas fa-child"></i><span>ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„</span></button>
            <button class="menu-btn" onclick="navTo('tool-whr')"><i class="fas fa-ruler-horizontal"></i><span>Ú©Ù…Ø± Ø¨Ù‡ Ù„Ú¯Ù† (WHR)</span></button>
            <button class="menu-btn" onclick="navTo('tool-preg')"><i class="fas fa-baby"></i><span>Ø³Ù† Ø¬Ù†ÛŒÙ† Ùˆ Ø²Ø§ÛŒÙ…Ø§Ù†</span></button>
        </div>
    </div>

    <!-- 4. Time Category -->
    <div id="view-cat-time" class="view-section">
        <div class="menu-grid">
            <button class="menu-btn" onclick="navTo('tool-age')"><i class="fas fa-birthday-cake"></i><span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚ Ø³Ù†</span></button>
            <button class="menu-btn" onclick="navTo('tool-date-conv')"><i class="fas fa-sync-alt"></i><span>ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®</span></button>
            <button class="menu-btn" onclick="navTo('tool-date-diff')"><i class="fas fa-hourglass-half"></i><span>Ø§Ø®ØªÙ„Ø§Ù ØªØ§Ø±ÛŒØ®</span></button>
            <button class="menu-btn" onclick="navTo('tool-date-calc')"><i class="fas fa-calculator"></i><span>Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ ØªØ§Ø±ÛŒØ®</span></button>
            <button class="menu-btn" onclick="navTo('tool-day-find')"><i class="fas fa-calendar-day"></i><span>ÛŒØ§Ø¨Ù†Ø¯Ù‡ Ø±ÙˆØ² Ù‡ÙØªÙ‡</span></button>
            <button class="menu-btn" onclick="navTo('tool-world-clock')"><i class="fas fa-globe"></i><span>Ø³Ø§Ø¹Øª Ø¬Ù‡Ø§Ù†ÛŒ</span></button>
        </div>
    </div>

    <!-- 5. Unit Category -->
    <div id="view-cat-unit" class="view-section">
        <div class="menu-grid">
            <button class="menu-btn" onclick="navTo('tool-unit-mass')"><i class="fas fa-weight-hanging"></i><span>ÙˆØ²Ù† Ùˆ Ø¬Ø±Ù…</span></button>
            <button class="menu-btn" onclick="navTo('tool-unit-len')"><i class="fas fa-ruler"></i><span>Ø·ÙˆÙ„ Ùˆ Ù…Ø³Ø§ÙØª</span></button>
            <button class="menu-btn" onclick="navTo('tool-unit-temp')"><i class="fas fa-thermometer-half"></i><span>Ø¯Ù…Ø§</span></button>
            <button class="menu-btn" onclick="navTo('tool-unit-area')"><i class="fas fa-vector-square"></i><span>Ù…Ø³Ø§Ø­Øª</span></button>
        </div>
    </div>

     <!-- 6. Other Category -->
     <div id="view-cat-other" class="view-section">
        <div class="menu-grid">
            <button class="menu-btn" onclick="navTo('tool-gpa')"><i class="fas fa-poll"></i><span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¹Ø¯Ù„</span></button>
        </div>
    </div>

    <!-- ================= TOOLS UI ================= -->

    <!-- Tool: Gold Price -->
    <div id="view-tool-gold" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title"><i class="fas fa-gem"></i> Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø·Ù„Ø§</h2>
            <div class="form-group"><label>Ù‚ÛŒÙ…Øª Ú¯Ø±Ù… Ø·Ù„Ø§ÛŒ Ø®Ø§Ù… (ØªÙˆÙ…Ø§Ù†)</label><input type="number" id="gold-price"></div>
            <div class="row">
                <div class="col"><label>ÙˆØ²Ù† (Ú¯Ø±Ù…)</label><input type="number" id="gold-weight"></div>
                <div class="col"><label>Ø§Ø¬Ø±Øª (%)</label><input type="number" id="gold-wage"></div>
            </div>
            <div class="row">
                <div class="col"><label>Ø³ÙˆØ¯ (%)</label><input type="number" id="gold-profit" value="7"></div>
                <div class="col"><label>Ù…Ø§Ù„ÛŒØ§Øª (%)</label><input type="number" id="gold-tax" value="9"></div>
            </div>
            <button class="btn-calc" onclick="calcGold()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-gold" class="result-box"></div>
        </div>
    </div>

    <!-- Tool: Rates (Embed) -->
    <div id="view-tool-rates" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title"><i class="fas fa-chart-line"></i> Ù†Ø±Ø® Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¨Ø§Ø²Ø§Ø±</h2>
            <p style="font-size:0.8rem; color:orange; margin-bottom:10px">Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù…ØªØµÙ„ Ø¨Ø§Ø´ÛŒØ¯.</p>
            <div id="navasan_table_container" style="overflow-x:auto;">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
        </div>
    </div>

    <!-- Tool: Loan -->
    <div id="view-tool-loan" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title"><i class="fas fa-money-check-alt"></i> Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆØ§Ù…</h2>
            <label>Ù…Ø¨Ù„Øº ÙˆØ§Ù… (ØªÙˆÙ…Ø§Ù†)</label><input type="number" id="loan-amount">
            <div class="row" style="margin-top:10px">
                <div class="col"><label>Ø³ÙˆØ¯ Ø³Ø§Ù„ÛŒØ§Ù†Ù‡ (%)</label><input type="number" id="loan-rate" value="23"></div>
                <div class="col"><label>Ù…Ø¯Øª (Ù…Ø§Ù‡)</label><input type="number" id="loan-month"></div>
            </div>
            <button class="btn-calc" onclick="calcLoan()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ù‚Ø³Ø§Ø·</button>
            <div id="res-loan" class="result-box"></div>
        </div>
    </div>

    <!-- Tool: Deposit -->
    <div id="view-tool-deposit" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title"><i class="fas fa-piggy-bank"></i> Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÙˆØ¯ Ø³Ù¾Ø±Ø¯Ù‡</h2>
            <label>Ù…Ø¨Ù„Øº Ø³Ù¾Ø±Ø¯Ù‡ (ØªÙˆÙ…Ø§Ù†)</label><input type="number" id="dep-amount">
            <div class="row" style="margin-top:10px">
                <div class="col"><label>Ù†Ø±Ø® Ø³ÙˆØ¯ (%)</label><input type="number" id="dep-rate"></div>
                <div class="col"><label>Ù†ÙˆØ¹</label>
                    <select id="dep-type">
                        <option value="monthly">Ù…Ø§Ù‡â€ŒØ´Ù…Ø§Ø±</option>
                        <option value="yearly">Ø³Ø§Ù„Ø§Ù†Ù‡ (ÛŒÚ©Ø¬Ø§)</option>
                    </select>
                </div>
            </div>
            <button class="btn-calc" onclick="calcDeposit()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÙˆØ¯</button>
            <div id="res-dep" class="result-box"></div>
        </div>
    </div>

    <!-- Tool: Discount -->
    <div id="view-tool-discount" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title"><i class="fas fa-percent"></i> Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ®ÙÛŒÙ</h2>
            <label>Ù‚ÛŒÙ…Øª Ø§ØµÙ„ÛŒ</label><input type="number" id="disc-price">
            <label>Ø¯Ø±ØµØ¯ ØªØ®ÙÛŒÙ</label><input type="number" id="disc-per">
            <button class="btn-calc" onclick="calcDisc()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-disc" class="result-box"></div>
        </div>
    </div>

    <!-- Tool: Health Forms (Simplified Layout for brevity) -->
    <div id="view-tool-bmi" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ø´Ø§Ø®Øµ ØªÙˆØ¯Ù‡ Ø¨Ø¯Ù†ÛŒ (BMI)</h2>
            <div class="row"><div class="col"><input type="number" id="bmi-w" placeholder="ÙˆØ²Ù† (kg)"></div><div class="col"><input type="number" id="bmi-h" placeholder="Ù‚Ø¯ (cm)"></div></div>
            <button class="btn-calc" onclick="calcBMI()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-bmi" class="result-box"></div>
        </div>
    </div>
    
    <div id="view-tool-bmr" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ù†Ø±Ø® Ø³ÙˆØ®Øª Ùˆ Ø³Ø§Ø² Ù¾Ø§ÛŒÙ‡ (BMR)</h2>
            <div class="row"><div class="col"><select id="bmr-g"><option value="m">Ù…Ø±Ø¯</option><option value="f">Ø²Ù†</option></select></div><div class="col"><input type="number" id="bmr-a" placeholder="Ø³Ù†"></div></div>
            <div class="row" style="margin-top:10px"><div class="col"><input type="number" id="bmr-w" placeholder="ÙˆØ²Ù† (kg)"></div><div class="col"><input type="number" id="bmr-h" placeholder="Ù‚Ø¯ (cm)"></div></div>
            <button class="btn-calc" onclick="calcBMR()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-bmr" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-tdee" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ú©Ø§Ù„Ø±ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø±ÙˆØ²Ø§Ù†Ù‡ (TDEE)</h2>
            <p style="font-size:0.8rem">Ø§Ø¨ØªØ¯Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª BMR Ø±Ø§ Ø¨Ø§Ù„Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø§ÛŒÙ†Ø¬Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
            <div class="row"><div class="col"><select id="tdee-g"><option value="m">Ù…Ø±Ø¯</option><option value="f">Ø²Ù†</option></select></div><div class="col"><input type="number" id="tdee-a" placeholder="Ø³Ù†"></div></div>
            <div class="row" style="margin-top:10px"><div class="col"><input type="number" id="tdee-w" placeholder="ÙˆØ²Ù†"></div><div class="col"><input type="number" id="tdee-h" placeholder="Ù‚Ø¯"></div></div>
            <label>Ù…ÛŒØ²Ø§Ù† ÙØ¹Ø§Ù„ÛŒØª</label>
            <select id="tdee-act">
                <option value="1.2">Ø¨Ø¯ÙˆÙ† ÙˆØ±Ø²Ø´ (Ù¾Ø´Øª Ù…ÛŒØ² Ù†Ø´ÛŒÙ†)</option>
                <option value="1.375">Ú©Ù… (1-3 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡)</option>
                <option value="1.55">Ù…ØªÙˆØ³Ø· (3-5 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡)</option>
                <option value="1.725">Ø²ÛŒØ§Ø¯ (6-7 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡)</option>
                <option value="1.9">Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯ (Ø´ØºÙ„ Ø³Ø®Øª/ÙˆØ±Ø²Ø´ Ø­Ø±ÙÙ‡ Ø§ÛŒ)</option>
            </select>
            <button class="btn-calc" onclick="calcTDEE()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-tdee" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-ibw" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„</h2>
            <div class="row"><div class="col"><select id="ibw-g"><option value="m">Ù…Ø±Ø¯</option><option value="f">Ø²Ù†</option></select></div><div class="col"><input type="number" id="ibw-h" placeholder="Ù‚Ø¯ (cm)"></div></div>
            <button class="btn-calc" onclick="calcIBW()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-ibw" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-whr" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ù†Ø³Ø¨Øª Ú©Ù…Ø± Ø¨Ù‡ Ù„Ú¯Ù† (WHR)</h2>
            <div class="row"><div class="col"><input type="number" id="whr-w" placeholder="Ø¯ÙˆØ± Ú©Ù…Ø± (cm)"></div><div class="col"><input type="number" id="whr-h" placeholder="Ø¯ÙˆØ± Ø¨Ø§Ø³Ù† (cm)"></div></div>
             <label>Ø¬Ù†Ø³ÛŒØª</label><select id="whr-g"><option value="m">Ù…Ø±Ø¯</option><option value="f">Ø²Ù†</option></select>
            <button class="btn-calc" onclick="calcWHR()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-whr" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-preg" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ø³Ù† Ø¬Ù†ÛŒÙ† Ùˆ Ø²Ø§ÛŒÙ…Ø§Ù†</h2>
            <p style="font-size:0.8rem">ØªØ§Ø±ÛŒØ® Ø§ÙˆÙ„ÛŒÙ† Ø±ÙˆØ² Ø¢Ø®Ø±ÛŒÙ† Ù‚Ø§Ø¹Ø¯Ú¯ÛŒ (LMP)</p>
            <div class="row">
                <div class="col"><input type="number" id="preg-d" placeholder="Ø±ÙˆØ²"></div>
                <div class="col"><select id="preg-m"><option value="1">ÙØ±ÙˆØ±Ø¯ÛŒÙ†</option><option value="2">Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª</option><option value="3">Ø®Ø±Ø¯Ø§Ø¯</option><option value="4">ØªÛŒØ±</option><option value="5">Ù…Ø±Ø¯Ø§Ø¯</option><option value="6">Ø´Ù‡Ø±ÛŒÙˆØ±</option><option value="7">Ù…Ù‡Ø±</option><option value="8">Ø¢Ø¨Ø§Ù†</option><option value="9">Ø¢Ø°Ø±</option><option value="10">Ø¯ÛŒ</option><option value="11">Ø¨Ù‡Ù…Ù†</option><option value="12">Ø§Ø³ÙÙ†Ø¯</option></select></div>
                <div class="col"><input type="number" id="preg-y" placeholder="Ø³Ø§Ù„"></div>
            </div>
            <button class="btn-calc" onclick="calcPreg()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-preg" class="result-box"></div>
        </div>
    </div>

    <!-- Tool: Time Forms -->
    <div id="view-tool-age" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚ Ø³Ù†</h2>
            <div class="row">
                <div class="col"><input type="number" id="age-d" placeholder="Ø±ÙˆØ²"></div>
                <div class="col"><select id="age-m"><option value="1">ÙØ±ÙˆØ±Ø¯ÛŒÙ†</option><option value="2">Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª</option><option value="3">Ø®Ø±Ø¯Ø§Ø¯</option><option value="4">ØªÛŒØ±</option><option value="5">Ù…Ø±Ø¯Ø§Ø¯</option><option value="6">Ø´Ù‡Ø±ÛŒÙˆØ±</option><option value="7">Ù…Ù‡Ø±</option><option value="8">Ø¢Ø¨Ø§Ù†</option><option value="9">Ø¢Ø°Ø±</option><option value="10">Ø¯ÛŒ</option><option value="11">Ø¨Ù‡Ù…Ù†</option><option value="12">Ø§Ø³ÙÙ†Ø¯</option></select></div>
                <div class="col"><input type="number" id="age-y" placeholder="Ø³Ø§Ù„"></div>
            </div>
            <button class="btn-calc" onclick="calcAge()">Ø´Ø±ÙˆØ¹ Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-age" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-date-conv" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®</h2>
            <select id="conv-type" onchange="uiDateConv()">
                <option value="s2g">Ø´Ù…Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ</option>
                <option value="g2s">Ù…ÛŒÙ„Ø§Ø¯ÛŒ Ø¨Ù‡ Ø´Ù…Ø³ÛŒ</option>
                <option value="s2h">Ø´Ù…Ø³ÛŒ Ø¨Ù‡ Ù‚Ù…Ø±ÛŒ</option>
            </select>
            <div class="row" style="margin-top:10px">
                <div class="col"><input type="number" id="conv-d" placeholder="Ø±ÙˆØ²"></div>
                <div class="col"><input type="number" id="conv-m" placeholder="Ù…Ø§Ù‡"></div>
                <div class="col"><input type="number" id="conv-y" placeholder="Ø³Ø§Ù„"></div>
            </div>
            <button class="btn-calc" onclick="calcDateConv()">ØªØ¨Ø¯ÛŒÙ„</button>
            <div id="res-conv" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-date-diff" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ø§Ø®ØªÙ„Ø§Ù Ø¯Ùˆ ØªØ§Ø±ÛŒØ®</h2>
            <label>ØªØ§Ø±ÛŒØ® Ø§ÙˆÙ„ (Ø´Ù…Ø³ÛŒ)</label>
            <div class="row"><div class="col"><input id="d1-d" placeholder="Ø±ÙˆØ²"></div><div class="col"><input id="d1-m" placeholder="Ù…Ø§Ù‡"></div><div class="col"><input id="d1-y" placeholder="Ø³Ø§Ù„"></div></div>
            <label style="margin-top:10px">ØªØ§Ø±ÛŒØ® Ø¯ÙˆÙ… (Ø´Ù…Ø³ÛŒ)</label>
            <div class="row"><div class="col"><input id="d2-d" placeholder="Ø±ÙˆØ²"></div><div class="col"><input id="d2-m" placeholder="Ù…Ø§Ù‡"></div><div class="col"><input id="d2-y" placeholder="Ø³Ø§Ù„"></div></div>
            <button class="btn-calc" onclick="calcDateDiff()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ø®ØªÙ„Ø§Ù</button>
            <div id="res-diff" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-date-calc" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ ØªØ§Ø±ÛŒØ®</h2>
            <div class="row"><div class="col"><input id="dc-d" placeholder="Ø±ÙˆØ²"></div><div class="col"><input id="dc-m" placeholder="Ù…Ø§Ù‡"></div><div class="col"><input id="dc-y" placeholder="Ø³Ø§Ù„"></div></div>
            <div class="row" style="margin-top:10px">
                <div class="col"><select id="dc-op"><option value="add">Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†</option><option value="sub">Ú©Ù… Ú©Ø±Ø¯Ù†</option></select></div>
                <div class="col"><input type="number" id="dc-val" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²"></div>
            </div>
            <button class="btn-calc" onclick="calcDateMath()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
            <div id="res-dc" class="result-box"></div>
        </div>
    </div>

     <div id="view-tool-day-find" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">ÛŒØ§Ø¨Ù†Ø¯Ù‡ Ø±ÙˆØ² Ù‡ÙØªÙ‡</h2>
            <div class="row"><div class="col"><input id="df-d" placeholder="Ø±ÙˆØ²"></div><div class="col"><input id="df-m" placeholder="Ù…Ø§Ù‡"></div><div class="col"><input id="df-y" placeholder="Ø³Ø§Ù„"></div></div>
            <button class="btn-calc" onclick="calcDayFind()">Ù¾ÛŒØ¯Ø§ Ú©Ù†</button>
            <div id="res-df" class="result-box"></div>
        </div>
    </div>

    <div id="view-tool-world-clock" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ø³Ø§Ø¹Øª Ø¬Ù‡Ø§Ù†ÛŒ</h2>
            <div id="clocks-container" style="display:grid; grid-template-columns:1fr 1fr; gap:10px; text-align:center;">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Tool: Units -->
    <div id="view-tool-unit-mass" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">ØªØ¨Ø¯ÛŒÙ„ ÙˆØ²Ù† Ùˆ Ø¬Ø±Ù…</h2>
            <input type="number" id="u-m-val" placeholder="Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            <div class="row" style="margin-top:10px">
                <div class="col"><select id="u-m-from"></select></div>
                <div class="col"><i class="fas fa-arrow-left" style="margin-top:10px"></i></div>
                <div class="col"><select id="u-m-to"></select></div>
            </div>
            <button class="btn-calc" onclick="calcUnit('mass')">ØªØ¨Ø¯ÛŒÙ„</button>
            <div id="res-u-mass" class="result-box"></div>
        </div>
    </div>
    <!-- Repeat structure for Length, Temp, Area (handled by Generic JS logic to save space, see JS part) -->
    <div id="view-tool-unit-len" class="view-section">
        <div class="tool-card"><h2 class="tool-title">ØªØ¨Ø¯ÛŒÙ„ Ø·ÙˆÙ„</h2><input type="number" id="u-l-val"><div class="row" style="margin-top:10px"><div class="col"><select id="u-l-from"></select></div><div class="col">Ø¨Ù‡</div><div class="col"><select id="u-l-to"></select></div></div><button class="btn-calc" onclick="calcUnit('len')">ØªØ¨Ø¯ÛŒÙ„</button><div id="res-u-len" class="result-box"></div></div>
    </div>
    <div id="view-tool-unit-temp" class="view-section">
        <div class="tool-card"><h2 class="tool-title">ØªØ¨Ø¯ÛŒÙ„ Ø¯Ù…Ø§</h2><input type="number" id="u-t-val"><div class="row" style="margin-top:10px"><div class="col"><select id="u-t-from"></select></div><div class="col">Ø¨Ù‡</div><div class="col"><select id="u-t-to"></select></div></div><button class="btn-calc" onclick="calcUnit('temp')">ØªØ¨Ø¯ÛŒÙ„</button><div id="res-u-temp" class="result-box"></div></div>
    </div>
    <div id="view-tool-unit-area" class="view-section">
        <div class="tool-card"><h2 class="tool-title">ØªØ¨Ø¯ÛŒÙ„ Ù…Ø³Ø§Ø­Øª</h2><input type="number" id="u-a-val"><div class="row" style="margin-top:10px"><div class="col"><select id="u-a-from"></select></div><div class="col">Ø¨Ù‡</div><div class="col"><select id="u-a-to"></select></div></div><button class="btn-calc" onclick="calcUnit('area')">ØªØ¨Ø¯ÛŒÙ„</button><div id="res-u-area" class="result-box"></div></div>
    </div>

    <!-- Tool: GPA -->
    <div id="view-tool-gpa" class="view-section">
        <div class="tool-card">
            <h2 class="tool-title">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¹Ø¯Ù„</h2>
            <div id="gpa-rows">
                <!-- Rows added by JS -->
            </div>
            <button class="btn-small" onclick="addGpaRow()" style="margin-top:10px">+ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø±Ø³</button>
            <button class="btn-calc" onclick="calcGPA()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¹Ø¯Ù„ Ú©Ù„</button>
            <div id="res-gpa" class="result-box"></div>
        </div>
    </div>

</div>
<!-- External Libs for Date and Rates -->
<script src="https://cdn.jsdelivr.net/npm/jalaali-js/dist/jalaali.min.js"></script>
<!-- User provided navasan script logic container -->
<script>function navasanret(data){
    try {
        const d = JSON.parse(data);
        let h = '<table class="currency-table"><thead><tr><th>Ø¹Ù†ÙˆØ§Ù†</th><th>Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†/Ø¯Ù„Ø§Ø±)</th></tr></thead><tbody>';
        // Selected items to display
        const items = {
            'usd_shakhs': 'Ø¯Ù„Ø§Ø±', 'eur_hav': 'ÛŒÙˆØ±Ùˆ', 'sekkeh': 'Ø³Ú©Ù‡ Ø§Ù…Ø§Ù…ÛŒ', 
            'bahar': 'Ø³Ú©Ù‡ Ø¨Ù‡Ø§Ø±', '18ayar': 'Ø·Ù„Ø§ÛŒ 18', 'btc': 'Ø¨ÛŒØª Ú©ÙˆÛŒÙ†', 'usdt': 'ØªØªØ±'
        };
        for(let k in items) {
            if(d[k]) h += `<tr><td>${items[k]}</td><td>${parseInt(d[k].value).toLocaleString()}</td></tr>`;
        }
        h += '</tbody></table>';
        document.getElementById('navasan_table_container').innerHTML = h;
    } catch(e) { document.getElementById('navasan_table_container').innerHTML = "Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª"; }
}</script>
<script src="https://www.navasan.tech/wp-navasan.php?usd_shakhs&eur_hav&sekkeh&bahar&18ayar&btc&usdt"></script>

<script>
    // --- Navigation System ---
    const historyStack = [];
    function navTo(viewId) {
        const current = document.querySelector('.view-section.active');
        if(current) historyStack.push(current.id);
        
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        // Handle Category vs Tool naming
        let targetId = viewId.startsWith('view-') ? viewId : 'view-' + viewId;
        document.getElementById(targetId).classList.add('active');
        
        // Back button visibility
        document.getElementById('back-btn').style.display = 'flex';
        window.scrollTo(0,0);
    }

    function goBack() {
        if(historyStack.length === 0) return;
        const prev = historyStack.pop();
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById(prev).classList.add('active');
        
        if(prev === 'view-home') document.getElementById('back-btn').style.display = 'none';
    }

    // --- Helpers ---
    const $ = id => document.getElementById(id);
    const val = id => parseFloat($(id).value) || 0;
    const setRes = (id, title, val, desc) => {
        const b = $(id);
        b.innerHTML = `<div class="result-title">${title}</div><div class="result-value">${val}</div><div class="result-desc">${desc}</div>`;
        b.style.display = 'block';
    };
    const fmt = n => n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

    // --- Financial ---
    function calcGold() {
        const p = val('gold-price'), w = val('gold-weight'), wageP = val('gold-wage'), profP = val('gold-profit'), taxP = val('gold-tax');
        if(!p || !w) return alert('Ù‚ÛŒÙ…Øª Ùˆ ÙˆØ²Ù† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        
        const goldVal = p * w;
        const wageVal = goldVal * (wageP/100);
        const profitVal = (goldVal + wageVal) * (profP/100);
        // Tax on Wage + Profit (New Law)
        const taxVal = (wageVal + profitVal) * (taxP/100);
        const total = goldVal + wageVal + profitVal + taxVal;
        
        setRes('res-gold', 'Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ', fmt(Math.round(total)) + ' ØªÙˆÙ…Ø§Ù†', 
            `Ù‚ÛŒÙ…Øª Ø·Ù„Ø§: ${fmt(Math.round(goldVal))}<br>Ø§Ø¬Ø±Øª Ùˆ Ø³ÙˆØ¯: ${fmt(Math.round(wageVal+profitVal))}<br>Ù…Ø§Ù„ÛŒØ§Øª: ${fmt(Math.round(taxVal))}`);
    }

    function calcLoan() {
        const P = val('loan-amount'), r = val('loan-rate'), n = val('loan-month');
        if(!P || !n) return;
        const i = (r/100)/12;
        const pmt = (i===0) ? P/n : (P * i * Math.pow(1+i, n)) / (Math.pow(1+i, n) - 1);
        const total = pmt * n;
        setRes('res-loan', 'Ù‚Ø³Ø· Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡', fmt(Math.round(pmt)) + ' ØªÙˆÙ…Ø§Ù†', `Ú©Ù„ Ø¨Ø§Ø²Ù¾Ø±Ø¯Ø§Ø®Øª: ${fmt(Math.round(total))}<br>Ú©Ù„ Ø³ÙˆØ¯: ${fmt(Math.round(total-P))}`);
    }

    function calcDeposit() {
        const P = val('dep-amount'), r = val('dep-rate'), type = $('dep-type').value;
        let profit = 0;
        if(type === 'monthly') profit = P * (r/100) / 12; // Monthly payout
        else profit = P * (r/100); // Yearly
        setRes('res-dep', 'Ø³ÙˆØ¯ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡', fmt(Math.round(profit)) + ' ØªÙˆÙ…Ø§Ù†', type==='monthly'?'Ø³ÙˆØ¯ Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡':'Ø³ÙˆØ¯ ÛŒÚ©Ø³Ø§Ù„Ù‡');
    }

    function calcDisc() {
        const p = val('disc-price'), d = val('disc-per');
        const save = p * (d/100);
        setRes('res-disc', 'Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ', fmt(p - save), `Ù…Ø¨Ù„Øº ØªØ®ÙÛŒÙ: ${fmt(save)}`);
    }

    // --- Health ---
    function calcBMI() {
        const w = val('bmi-w'), h = val('bmi-h')/100;
        if(!w || !h) return;
        const bmi = (w/(h*h)).toFixed(1);
        let st = "", diff = 0;
        const ideal = 22 * h * h;
        if(bmi<18.5) st="Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†";
        else if(bmi<25) st="Ù†Ø±Ù…Ø§Ù„";
        else if(bmi<30) { st="Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†"; diff = w - (25*h*h); }
        else { st="Ú†Ø§Ù‚ÛŒ"; diff = w - (25*h*h); }
        
        let desc = `ÙˆØ¶Ø¹ÛŒØª: ${st}`;
        if(diff > 0) desc += `<br>ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ ${diff.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† Ø¯Ø§Ø±ÛŒØ¯.`;
        setRes('res-bmi', 'BMI Ø´Ù…Ø§', bmi, desc);
    }

    function calcBMR() {
        const g = $('bmr-g').value, a = val('bmr-a'), w = val('bmr-w'), h = val('bmr-h');
        let bmr = (10*w) + (6.25*h) - (5*a) + (g==='m'?5:-161);
        setRes('res-bmr', 'BMR (Ù¾Ø§ÛŒÙ‡)', Math.round(bmr) + ' Ú©Ø§Ù„Ø±ÛŒ', 'Ù…ÛŒØ²Ø§Ù† Ú©Ø§Ù„Ø±ÛŒ Ù…ØµØ±ÙÛŒ Ø¨Ø¯Ù† Ø¯Ø± Ø­Ø§Ù„Øª Ø§Ø³ØªØ±Ø§Ø­Øª Ú©Ø§Ù…Ù„');
    }

    function calcTDEE() {
        const g = $('tdee-g').value, a = val('tdee-a'), w = val('tdee-w'), h = val('tdee-h'), act = val('tdee-act');
        if(!w) return alert('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        let bmr = (10*w) + (6.25*h) - (5*a) + (g==='m'?5:-161);
        let tdee = bmr * act;
        setRes('res-tdee', 'Ú©Ø§Ù„Ø±ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø±ÙˆØ²Ø§Ù†Ù‡', Math.round(tdee), 'Ø¨Ø±Ø§ÛŒ Ø«Ø§Ø¨Øª Ù†Ú¯Ù‡ Ø¯Ø§Ø´ØªÙ† ÙˆØ²Ù† ÙØ¹Ù„ÛŒ');
    }

    function calcIBW() {
        const h = val('ibw-h'), g = $('ibw-g').value;
        // Devine Formula
        let base = g==='m'?50:45.5;
        let ibw = base + 2.3 * ((h/2.54) - 60);
        setRes('res-ibw', 'ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„', Math.round(ibw) + ' Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…', 'Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ±Ù…ÙˆÙ„ Devine');
    }

    function calcWHR() {
        const w = val('whr-w'), h = val('whr-h'), g = $('whr-g').value;
        const r = (w/h).toFixed(2);
        let risk = "Ú©Ù…";
        if(g==='m' && r>0.9) risk="Ø¨Ø§Ù„Ø§";
        if(g==='f' && r>0.85) risk="Ø¨Ø§Ù„Ø§";
        setRes('res-whr', 'Ù†Ø³Ø¨Øª WHR', r, `Ø±ÛŒØ³Ú© Ø³Ù„Ø§Ù…ØªÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ú†Ø§Ù‚ÛŒ Ø´Ú©Ù…ÛŒ: ${risk}`);
    }

    function calcPreg() {
        const d = val('preg-d'), m = val('preg-m'), y = val('preg-y');
        if(!d) return;
        const gLMP = jalaali.toGregorian(y, m, d);
        const lmp = new Date(gLMP.gy, gLMP.gm-1, gLMP.gd);
        const now = new Date();
        const diffT = now - lmp;
        const days = Math.floor(diffT/(1000*60*60*24));
        const weeks = Math.floor(days/7);
        const remDays = days % 7;
        
        const due = new Date(lmp); due.setDate(lmp.getDate()+280);
        const jDue = jalaali.toJalaali(due);
        
        setRes('res-preg', 'Ø³Ù† Ø¬Ù†ÛŒÙ†', `${weeks} Ù‡ÙØªÙ‡ Ùˆ ${remDays} Ø±ÙˆØ²`, `ØªØ§Ø±ÛŒØ® ØªÙ‚Ø±ÛŒØ¨ÛŒ Ø²Ø§ÛŒÙ…Ø§Ù†: ${jDue.jy}/${jDue.jm}/${jDue.jd}`);
    }

    // --- Time ---
    let ageInterval;
    function calcAge() {
        const d=val('age-d'), m=val('age-m'), y=val('age-y');
        if(!d) return;
        
        if(ageInterval) clearInterval(ageInterval);
        
        const gB = jalaali.toGregorian(y,m,d);
        const birth = new Date(gB.gy, gB.gm-1, gB.gd);
        
        const update = () => {
            const now = new Date();
            let diff = now - birth;
            let sec = Math.floor(diff/1000);
            let min = Math.floor(sec/60);
            let hr = Math.floor(min/60);
            let day = Math.floor(hr/24);
            let yr = Math.floor(day/365.25);
            
            // Next Birthday
            const nextB = new Date(birth);
            nextB.setFullYear(now.getFullYear());
            if(now > nextB) nextB.setFullYear(now.getFullYear()+1);
            const daysLeft = Math.ceil((nextB - now)/(1000*60*60*24));
            
            setRes('res-age', 'Ø³Ù† Ø¯Ù‚ÛŒÙ‚ Ø´Ù…Ø§', `${yr} Ø³Ø§Ù„`, 
                `${day} Ø±ÙˆØ² Ø²Ù†Ø¯Ù‡ Ø¨ÙˆØ¯Ù‡â€ŒØ§ÛŒØ¯<br>ÛŒØ§ ${fmt(hr)} Ø³Ø§Ø¹Øª<br>ÛŒØ§ ${fmt(sec)} Ø«Ø§Ù†ÛŒÙ‡<br><br><b>${daysLeft} Ø±ÙˆØ²</b> Ù…Ø§Ù†Ø¯Ù‡ ØªØ§ ØªÙˆÙ„Ø¯ Ø¨Ø¹Ø¯ÛŒ`);
        };
        update();
        ageInterval = setInterval(update, 1000);
    }

    function calcDateConv() {
        const t = $('conv-type').value, d=val('conv-d'), m=val('conv-m'), y=val('conv-y');
        if(t==='s2g'){
            const g = jalaali.toGregorian(y,m,d);
            setRes('res-conv', 'Ù…ÛŒÙ„Ø§Ø¯ÛŒ', `${g.gy}-${g.gm}-${g.gd}`, '');
        } else if(t==='g2s'){
            const j = jalaali.toJalaali(y,m,d);
            setRes('res-conv', 'Ø´Ù…Ø³ÛŒ', `${j.jy}/${j.jm}/${j.jd}`, '');
        } else {
             // Approximate Hijri
             const g = jalaali.toGregorian(y,m,d);
             const dt = new Date(g.gy, g.gm-1, g.gd);
             const h = new Intl.DateTimeFormat('en-u-ca-islamic', {day:'numeric', month:'numeric', year:'numeric'}).format(dt);
             setRes('res-conv', 'Ù‚Ù…Ø±ÛŒ (ØªÙ‚Ø±ÛŒØ¨ÛŒ)', h, '');
        }
    }

    function calcDateDiff() {
        const y1=val('d1-y'), m1=val('d1-m'), d1=val('d1-d');
        const y2=val('d2-y'), m2=val('d2-m'), d2=val('d2-d');
        const g1 = jalaali.toGregorian(y1,m1,d1);
        const g2 = jalaali.toGregorian(y2,m2,d2);
        const date1 = new Date(g1.gy, g1.gm-1, g1.gd);
        const date2 = new Date(g2.gy, g2.gm-1, g2.gd);
        const diff = Math.abs(date2 - date1);
        const days = Math.ceil(diff/(1000*60*60*24));
        setRes('res-diff', 'Ø§Ø®ØªÙ„Ø§Ù', `${days} Ø±ÙˆØ²`, `${(days/365.25).toFixed(1)} Ø³Ø§Ù„`);
    }
    
    function calcDateMath(){
        const d=val('dc-d'),m=val('dc-m'),y=val('dc-y'), op=$('dc-op').value, v=val('dc-val');
        const g = jalaali.toGregorian(y,m,d);
        const dt = new Date(g.gy, g.gm-1, g.gd);
        dt.setDate(dt.getDate() + (op==='add'?v:-v));
        const j = jalaali.toJalaali(dt);
        setRes('res-dc', 'ØªØ§Ø±ÛŒØ® Ø¬Ø¯ÛŒØ¯', `${j.jy}/${j.jm}/${j.jd}`, '');
    }
    
    function calcDayFind(){
        const d=val('df-d'),m=val('df-m'),y=val('df-y');
        const g = jalaali.toGregorian(y,m,d);
        const dt = new Date(g.gy, g.gm-1, g.gd);
        const day = dt.toLocaleDateString('fa-IR', {weekday:'long'});
        setRes('res-df', 'Ø±ÙˆØ² Ù‡ÙØªÙ‡', day, '');
    }
    
    function updateClocks(){
        const zones = {'Ø§ÛŒØ±Ø§Ù†': 'Asia/Tehran', 'Ù†ÛŒÙˆÛŒÙˆØ±Ú©': 'America/New_York', 'Ù„Ù†Ø¯Ù†': 'Europe/London', 'ØªÙˆÚ©ÛŒÙˆ': 'Asia/Tokyo', 'Ø¯Ø¨ÛŒ': 'Asia/Dubai', 'Ø³ÛŒØ¯Ù†ÛŒ': 'Australia/Sydney'};
        let h = "";
        for(let z in zones){
            const time = new Date().toLocaleTimeString('fa-IR', {timeZone: zones[z], hour:'2-digit', minute:'2-digit'});
            h += `<div><div style="font-size:0.8rem;color:#666">${z}</div><div style="font-weight:bold;font-size:1.1rem">${time}</div></div>`;
        }
        $('clocks-container').innerHTML = h;
    }
    setInterval(updateClocks, 60000); updateClocks();

    // --- Units ---
    const units = {
        mass: {
            factors: {'kg':1, 'g':0.001, 'mg':0.000001, 'ton':1000, 'lb':0.453592, 'oz':0.0283495, 'mesghal':0.004608, 'nokhod':0.000192},
            names: {'kg':'Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…', 'g':'Ú¯Ø±Ù…', 'mg':'Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…', 'ton':'ØªÙ†', 'lb':'Ù¾ÙˆÙ†Ø¯', 'oz':'Ø§ÙˆÙ†Ø³', 'mesghal':'Ù…Ø«Ù‚Ø§Ù„ Ø·Ù„Ø§', 'nokhod':'Ù†Ø®ÙˆØ¯ Ø·Ù„Ø§'}
        },
        len: {
            factors: {'m':1, 'cm':0.01, 'mm':0.001, 'km':1000, 'in':0.0254, 'ft':0.3048, 'yd':0.9144, 'mile':1609.34},
            names: {'m':'Ù…ØªØ±', 'cm':'Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±', 'mm':'Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±', 'km':'Ú©ÛŒÙ„ÙˆÙ…ØªØ±', 'in':'Ø§ÛŒÙ†Ú†', 'ft':'ÙÙˆØª', 'yd':'ÛŒØ§Ø±Ø¯', 'mile':'Ù…Ø§ÛŒÙ„'}
        },
        area: {
            factors: {'m2':1, 'cm2':0.0001, 'hec':10000, 'jerib':1000, 'ft2':0.0929},
            names: {'m2':'Ù…ØªØ± Ù…Ø±Ø¨Ø¹', 'cm2':'Ø³Ø§Ù†Øª Ù…Ø±Ø¨Ø¹', 'hec':'Ù‡Ú©ØªØ§Ø±', 'jerib':'Ø¬Ø±ÛŒØ¨', 'ft2':'ÙÙˆØª Ù…Ø±Ø¨Ø¹'}
        },
        temp: { names: {'c':'Ø³Ù„Ø³ÛŒÙˆØ³', 'f':'ÙØ§Ø±Ù†Ù‡Ø§ÛŒØª', 'k':'Ú©Ù„ÙˆÛŒÙ†'} } // Special logic
    };
    
    // Init Units
    ['mass', 'len', 'area', 'temp'].forEach(cat => {
        const selF = $(`u-${cat.charAt(0)}-from`), selT = $(`u-${cat.charAt(0)}-to`);
        if(selF){
            for(let k in units[cat].names) {
                selF.add(new Option(units[cat].names[k], k));
                selT.add(new Option(units[cat].names[k], k));
            }
            selT.selectedIndex = 1;
        }
    });

    function calcUnit(cat) {
        const c = cat.charAt(0);
        const v = val(`u-${c}-val`), f = $(`u-${c}-from`).value, t = $(`u-${c}-to`).value;
        let res = 0;
        if(cat === 'temp'){
            if(f==='c' && t==='f') res = (v*9/5)+32;
            else if(f==='c' && t==='k') res = v+273.15;
            else if(f==='f' && t==='c') res = (v-32)*5/9;
            else if(f==='k' && t==='c') res = v-273.15;
            else res = v; // Simplified
        } else {
            const base = v * units[cat].factors[f];
            res = base / units[cat].factors[t];
        }
        setRes(`res-u-${cat}`, 'Ù†ØªÛŒØ¬Ù‡', Number(res.toPrecision(6)), '');
    }

    // --- GPA ---
    function addGpaRow(){
        const div = document.createElement('div');
        div.className = 'gpa-row';
        div.innerHTML = `<input type="number" placeholder="Ù†Ù…Ø±Ù‡" class="g-score"><input type="number" placeholder="ÙˆØ§Ø­Ø¯" class="g-credit" style="width:70px">`;
        $('gpa-rows').appendChild(div);
    }
    addGpaRow(); addGpaRow(); addGpaRow();

    function calcGPA(){
        const scores = document.querySelectorAll('.g-score');
        const credits = document.querySelectorAll('.g-credit');
        let sumS = 0, sumC = 0;
        scores.forEach((s, i) => {
            const sc = parseFloat(s.value), cr = parseFloat(credits[i].value);
            if(!isNaN(sc) && !isNaN(cr)){
                sumS += sc * cr;
                sumC += cr;
            }
        });
        if(sumC === 0) return;
        setRes('res-gpa', 'Ù…Ø¹Ø¯Ù„ Ø´Ù…Ø§', (sumS/sumC).toFixed(2), `Ù…Ø¬Ù…ÙˆØ¹ ÙˆØ§Ø­Ø¯Ù‡Ø§: ${sumC}`);
    }
<script>
    // --- Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬ÙˆØ² ---

    document.addEventListener("DOMContentLoaded", function() {
        // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ø¯Ø§Ø®Ù„ Ø§ÛŒØªØ§ Ù‡Ø³ØªÛŒÙ…
        if (window.Eitaa && window.Eitaa.WebApp) {
            // 1. Ø§Ø¹Ù„Ø§Ù… Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ø¨Ù‡ Ø§ÛŒØªØ§
            window.Eitaa.WebApp.ready();
            window.Eitaa.WebApp.expand(); // ØªÙ…Ø§Ù… ØµÙØ­Ù‡ Ú©Ø±Ø¯Ù†

            // 2. Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬ÙˆØ² Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ Ø´Ø¯Ù†
            // Ù†Ú©ØªÙ‡: Ø§ÛŒÙ† Ù¾Ù†Ø¬Ø±Ù‡ ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. 
            // Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¯ÛŒÚ¯Ø± Ù…Ø²Ø§Ø­Ù…Ø´ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            window.Eitaa.WebApp.requestWriteAccess(function(allowed) {
                if (allowed) {
                    // 3. Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø¯ØŒ Ø¢ÛŒØ¯ÛŒ Ø§Ùˆ Ø±Ø§ Ù…ÛŒÚ¯ÛŒØ±ÛŒÙ…
                    const user = window.Eitaa.WebApp.initDataUnsafe.user;
                    
                    if (user) {
                        // Ø³Ø§Ø®Øª Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø§Ø¯Ù…ÛŒÙ† (Ø´Ù…Ø§)
                        const msgText = `ğŸ”” Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ Ø¬Ø°Ø¨ Ø´Ø¯:\nğŸ‘¤ Ù†Ø§Ù…: ${user.first_name}\nğŸ†” Ø¢ÛŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ: ${user.id}\nğŸŒ ÛŒÙˆØ²Ø±Ù†ÛŒÙ…: @${user.username || 'Ù†Ø¯Ø§Ø±Ø¯'}`;

                        // 4. Ø§Ø±Ø³Ø§Ù„ Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù¾ÛŒâ€ŒÙˆÛŒ Ø´Ù…Ø§ (Ú†ÙˆÙ† Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù†Ø¯Ø§Ø±ÛŒØ¯)
                        // Ù„Ø·ÙØ§ ØªÙˆÚ©Ù† Ùˆ Ø¢ÛŒØ¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± Ø®Ø· Ù¾Ø§ÛŒÛŒÙ† Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯
                        const myToken = "bot80048:f679b83e-2f4e-46e4-8fef-0a439122f861"; // ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª
                        const myChatId = "80048";     // Ø¢ÛŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ Ø®ÙˆØ¯ØªØ§Ù†

                        // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§ÛŒØªØ§ (Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨ÙÙ‡Ù…Ø¯)
                        fetch(`https://eitaayar.ir/api/${myToken}/sendMessage?chat_id=${myChatId}&text=${encodeURIComponent(msgText)}`)
                        .then(res => console.log("Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯"))
                        .catch(err => console.error("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø¢ÛŒØ¯ÛŒ"));
                    }
                }
            });
        }
    });

    // ... (Ø¨Ù‚ÛŒÙ‡ Ú©Ø¯Ù‡Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§ØªÛŒ Ú©Ù‡ Ù‚Ø¨Ù„Ø§ Ø¯Ø§Ø´ØªÛŒØ¯ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø´Ù†Ø¯) ...
</script>

</script>
</body>
</html>








